---
- name: Configure kubernetes cluster (RKE)
  hosts: infrastructure
  roles:
    - role: rke
      vars:
        mode: config

- name: Prepare kubernetes nodes (RKE)
  hosts: kubernetes
  roles:
    - role: rke
      vars:
        mode: node

- name: Deploy kubernetes cluster (RKE)
  hosts: infrastructure
  roles:
    - role: rke
      vars:
        mode: deploy

- name: Setup kubectl for RKE
  hosts: infrastructure
  roles:
    - role: rke
      vars:
        mode: kubectl
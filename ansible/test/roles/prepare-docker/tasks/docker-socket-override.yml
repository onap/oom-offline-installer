---
- name: Create docker.socket systemd dir for override
  file:
    path: /etc/systemd/system/docker.socket.d
    state: directory

- name: Fake dockerd dependent docker.socket service not to actually listen the docker socket as dockerd is not used in container only docker client
  copy:
    content: |
      [Socket]
      ListenStream=
      ListenStream=/tmp/fake
    dest: /etc/systemd/system/docker.socket.d/override.conf

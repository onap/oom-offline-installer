---
- name: Load VNC server image
  docker_image:
    name: "{{ vnc_server_image_name }}:{{ vnc_server_image_tag }}"
    load_path: "{{ app_data_path }}/offline_data/docker_images_infra/{{ vnc_server_image_name | regex_replace('\\/', '_') }}_{{ vnc_server_image_tag }}.tar"
    state: present
    timeout: 120

- name: Start VNC server container
  docker_container:
    name: vnc_server
    image: "{{ vnc_server_image_name }}:{{ vnc_server_image_tag }}"
    state: started
    restart_policy: unless-stopped
    ports:
      - "5901:5901"
      - "6901:6901"
    env:
      VNC_PW: "{{ vnc_passwd }}"

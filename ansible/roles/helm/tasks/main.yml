---
# Make utility is missing in Ubuntu by default.
# Make utility is using for building local helm repository so is necessary to install it.
- name: Install build-essential
  package:
    name: build-essential
    state: present
  when: ansible_os_family == "Debian"

- name: Install Helm
  unarchive:
    src: "{{ app_data_path }}/downloads/helm-{{ helm_version }}-linux-amd64.tar.gz"
    dest: "{{ helm_bin_dir }}"
    extra_opts:
      - --strip=1
      - --wildcards
      - '*/helm'
    remote_src: true
    mode: 0755

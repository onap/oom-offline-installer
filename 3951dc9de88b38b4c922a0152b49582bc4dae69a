{
  "comments": [
    {
      "key": {
        "uuid": "019930ac_6292e7da",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T12:51:31Z",
      "side": 1,
      "message": "this will always match if 2nd param is filled, if 2nd param is not filled it will lead to \"else\" clause and exit 1.\n\nWe need to remove this \"!\" and redesign else clause",
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6eb594bf_5e6e1097",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-14T09:17:27Z",
      "side": 1,
      "message": "the used Charts source does not belong inside this script. I would like to run the script for any local dir on my machine having some charts.",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf9b5315_bb53e642",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 5000
      },
      "writtenOn": "2019-03-14T10:49:24Z",
      "side": 1,
      "message": "Yes, I was thinking about it as well. Even if you\u0027d like to have the option to modify the enabled subsystems before the parsing.",
      "parentUuid": "6eb594bf_5e6e1097",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4bacec7_db5c142e",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T12:01:40Z",
      "side": 1,
      "message": "This is experimental/first version of the script which should allow us to collect images versions from OOM using helm charts. We don\u0027t aim for \"ANY\" charts source as this was never tested outside of \"OOM\" but in theory it should work.\nI guess that helm charts localhost presence should be covered outside of this script and dir with helm charts can be obtained as parameter ? i.e. especially on offline deployments we can\u0027t simply pull oom from outside gerrit and this script is not downloading images just producing the list, which should work also in offline lab",
      "parentUuid": "cf9b5315_bb53e642",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a92a944_ac9ee261",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-18T12:47:20Z",
      "side": 1,
      "message": "Michal, it shoudl be outside. Not wanting to have ANY, just having oom charts from local dir. cloning just does not belong to this script.",
      "parentUuid": "e4bacec7_db5c142e",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4030adc2_0b085fd9",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T13:03:54Z",
      "side": 1,
      "message": "yes, I think I agreed with this part already",
      "parentUuid": "1a92a944_ac9ee261",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49264200_697576ab",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-14T09:17:27Z",
      "side": 1,
      "message": "what is the reason helm is needed?\nWhy can\u0027t we just parse charts files with Python yaml module? \nThe whole script should be Python.",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dddb5ddf_a1bb9982",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 5000
      },
      "writtenOn": "2019-03-14T10:49:24Z",
      "side": 1,
      "message": "Actually I haven\u0027t found the common pattern as the images are often entered in different way and not all of the images in the charts are used in the deployment. I thing there should be a way how to do that without the helm, but haven\u0027t found out how to do that yet. So I decided to use the helm to get the relevant list of the images in three different patterns only.",
      "parentUuid": "49264200_697576ab",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8a99f0e_5a65cb2c",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 5239
      },
      "writtenOn": "2019-03-15T09:50:23Z",
      "side": 1,
      "message": "I agree with Tomas, one can spend a lot of time reproducing helms logic (for estetic reasons) and in the end if helms changes it will impact this script.",
      "parentUuid": "dddb5ddf_a1bb9982",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89988e3f_5e8fd637",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-15T11:17:12Z",
      "side": 1,
      "message": "I don\u0027t understand the problem and trying to ask why Helm is needed?\nYou mean Helm charts format/structure changes and this script would need to change as image info parsed differently?\nAnd if Helm changes, is it then guaranteed that below \"helm template\" command output does _not_ ever change?\n\nAnd why we would need to reproduce helm logic? Is it so that I cannot find image version from Helm chart files, but I need to setup helm and apply given charts and ask from helm.",
      "parentUuid": "d8a99f0e_5a65cb2c",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a1b9a1e_c2940305",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 5239
      },
      "writtenOn": "2019-03-15T12:18:42Z",
      "side": 1,
      "message": "If I understand the Tomeses problem is: one component provides image as value \"readinessImage\" the other as \"image\". Also if you want to prepare package with not all components enabled. How would you see that solved only using only files? Exuse me if I do not understand everything fully I am quite new in here:)",
      "parentUuid": "89988e3f_5e8fd637",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e348f6fc_5045850e",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-15T12:27:07Z",
      "side": 1,
      "message": "no problem, I don\u0027t understand either:)\nAnd one of the comments was that if this script is installing and using helm, it should be explained why.\n\nThis enabled thing, isn\u0027t that already handled on line 55 of this script i.e. plain files reading no Helm needed?",
      "parentUuid": "2a1b9a1e_c2940305",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0a54b41e_dcf53ab6",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 5239
      },
      "writtenOn": "2019-03-15T13:18:04Z",
      "side": 1,
      "message": "you are right it is there, at least for onap. I think it would be better not to use helm I just do not see the point for Tomas to struggle with it now using bash.",
      "parentUuid": "e348f6fc_5045850e",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10740daa_1470dd73",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T12:01:40Z",
      "side": 1,
      "message": "Using helm seems to be the only way for now, I also dislike this dependency but in fact is a nice trick how to reuse helm native parsing, I can understand how complex it could be if we don\u0027t use this native way and try to implement some python yaml parsing for helm charts instead.",
      "parentUuid": "49264200_697576ab",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "797d79d0_f384bbb4",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 80,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-18T12:47:20Z",
      "side": 1,
      "message": "we want to parse docker image versions and just for enabled components. enabled part was already handled with pure yaml parsing. Is there some dependency or override/substitution we need helm to handle to see actual correct image version per component or what? Can you elaborate? And even so, it does not matter much even if we would download all of the versions.",
      "parentUuid": "10740daa_1470dd73",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 80,
        "endChar": 41
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f144bf3_6efa82c8",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-14T09:17:27Z",
      "side": 1,
      "message": "describe what format of line this script will produce into final file.",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 85,
        "endChar": 45
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab3617f7_c75c5fba",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-14T09:17:27Z",
      "side": 1,
      "message": "if Helm is really needed, it should be told why.",
      "range": {
        "startLine": 87,
        "startChar": 4,
        "endLine": 87,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ebdd848_5712b727",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T12:01:40Z",
      "side": 1,
      "message": "helm is more native tool for parsing helm charts, isn\u0027t it ?\nThe main thing as I understand it from earlier comments in this file is that helm is using it\u0027s own syntax within yaml and images are processed differently across onap sub-projects ... this will disappear once they are successfully inserted into local helm repo and can be more easily parsed. To me this looks like simpler approach and native way of parsing helm charts.",
      "parentUuid": "ab3617f7_c75c5fba",
      "range": {
        "startLine": 87,
        "startChar": 4,
        "endLine": 87,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "934490a7_be59ace2",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-18T12:47:20Z",
      "side": 1,
      "message": "Helm is using yaml. \nPlease describe here what different conventions helm uses and how it unifies the end result. We sure can parse all the different conventions purely with yaml too. Then we see whihc one is simpler. It\u0027s really not simple if we need to use helm for this.",
      "parentUuid": "2ebdd848_5712b727",
      "range": {
        "startLine": 87,
        "startChar": 4,
        "endLine": 87,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f07d8a25_743ffe52",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-03-18T13:03:54Z",
      "side": 1,
      "message": "exact examples are visible in this comment\nhttps://jira.onap.org/browse/OOM-1622?focusedCommentId\u003d35132\u0026page\u003dcom.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-35132\n\nTomas already spent some time in finding non-helm way and I really don\u0027t think it\u0027s worth for the effort. Furthermore, keeping native helm parsing looks also safer to maintain with regards of all possible changes in yaml charts.",
      "parentUuid": "934490a7_be59ace2",
      "range": {
        "startLine": 87,
        "startChar": 4,
        "endLine": 87,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a8a7077_8b45882d",
        "filename": "build/creating_data/docker-images-collector.sh",
        "patchSetId": 6
      },
      "lineNbr": 87,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-03-18T13:36:12Z",
      "side": 1,
      "message": "yes effort we are here after with these comments. And wanted those groundings to be explained here in the code as it\u0027s a quite exotic way to parse information in utility script. Even if how \"native\" it can be in the environment where helm is supposed to be used, it\u0027s not at all so native in this kind of script.\n\nAnd now when actually started to thinking the purpose of this script, wonder are we doing this completely wrong way now if trying to collect this list from helm charts?\n\nThere is some process in onap for artifacts versions:\nhttps://wiki.onap.org/display/DW/Independent+Versioning+and+Release+Process\n\nand manifests of version lists both for docker images:\nhttps://git.onap.org/integration/tree/version-manifest/src/main/resources/docker-manifest.csv\n\nand java artifacts:\nhttps://git.onap.org/integration/tree/version-manifest/src/main/resources/java-manifest.csv\n\nShould we base our downloading on those? At least we should have version to support those formats/urls.",
      "parentUuid": "f07d8a25_743ffe52",
      "range": {
        "startLine": 87,
        "startChar": 4,
        "endLine": 87,
        "endChar": 17
      },
      "revId": "3951dc9de88b38b4c922a0152b49582bc4dae69a",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}
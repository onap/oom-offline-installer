{
  "comments": [
    {
      "key": {
        "uuid": "e78f494c_d898037d",
        "filename": "ansible/roles/dns/tasks/main.yml",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-21T08:16:02Z",
      "side": 1,
      "message": "Which of the roles included after \u0027dns\u0027 role fails due to lack of dns container before the ond of the playbook? vncserver nginx or nexus?\n\nansible$ grep -A 5 -B 7 dns infrastructure.yml\n- name: Setup infrastructure servers\n  hosts: infrastructure\n  roles:\n    - chrony\n    - package-repository-check\n    - certificates\n    - docker\n    - dns\n    - vncserver\n    - nginx\n    - nexus\n\n- name: Setup base for Kubernetes nodes",
      "revId": "e755cc7df34c95c6f671f6ab62bed34252cc061c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59cf737f_986ab653",
        "filename": "ansible/roles/dns/tasks/main.yml",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-21T08:21:23Z",
      "side": 1,
      "message": "Nevermind, \u0027nexus\u0027 that is.",
      "parentUuid": "e78f494c_d898037d",
      "revId": "e755cc7df34c95c6f671f6ab62bed34252cc061c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16109756_2bcaa6c7",
        "filename": "ansible/roles/dns/tasks/main.yml",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-05-21T08:25:04Z",
      "side": 1,
      "message": "I think nexus is the first one needing it. But why this problem is not visible in molecule tests? Even though infra-play is still not merged, but did not hit it in local runs.",
      "parentUuid": "e78f494c_d898037d",
      "revId": "e755cc7df34c95c6f671f6ab62bed34252cc061c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afa93895_f27eb2f9",
        "filename": "ansible/roles/dns/tasks/main.yml",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 4009
      },
      "writtenOn": "2019-05-21T08:55:04Z",
      "side": 1,
      "message": "there were 2 issues: 1) handler not triggered, 2) dnsmasq container is in the loop w/o setting-up dns directly in task (or handler newly) - issue was detected on \"Wait for nexus to come-up\" due to not working dns resolving\n\ninfrastructure playbook test is not yet available for molecule as per OOM-1816 ?",
      "parentUuid": "16109756_2bcaa6c7",
      "revId": "e755cc7df34c95c6f671f6ab62bed34252cc061c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6585b63_3df7bafa",
        "filename": "ansible/roles/dns/tasks/main.yml",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-21T09:03:00Z",
      "side": 1,
      "message": "No, the issue was not that handler was not _triggered_ but that it was not _flushed_. It was indeed triggered but at the end of the playbook, which is too late.\n\nSamuli: This bug is a regression introduced by 87422 and play-infra tests in 85907 didn\u0027t detect that because they were not rebased since 87422 got into master.\n\nRole tests are not able to detect integration level issues that\u0027s why \u0027dns\u0027 role tests are unable to detect that kind of issues, but that\u0027s obvious i think.",
      "parentUuid": "afa93895_f27eb2f9",
      "revId": "e755cc7df34c95c6f671f6ab62bed34252cc061c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}
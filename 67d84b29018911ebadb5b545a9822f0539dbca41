{
  "comments": [
    {
      "key": {
        "uuid": "d3872785_15020ed3",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-06T13:29:44Z",
      "side": 1,
      "message": "Can\u0027t you just use native \"known_hosts\" ansible module to make it really idempotent and avoid using \u0027shell\u0027 module?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c70f43f2_9d9ce5fd",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-05-06T13:46:56Z",
      "side": 1,
      "message": "I didn\u0027t even know that module exists, however it seems like it couldn\u0027t apply here. We don\u0027t only add known hosts entries, we also ask the respective hosts for their public keys. It seems like known_hosts module can only use predetermined public keys.",
      "parentUuid": "d3872785_15020ed3",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cd8f00e_3d100427",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-06T14:06:06Z",
      "side": 1,
      "message": "How come? Define two tasks: one that produces facts with gathered keys from relevant hosts and second one that uses \u0027known_hosts\u0027 module to inject them. Dead simple and idempotent TMK.",
      "parentUuid": "c70f43f2_9d9ce5fd",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "902fcf41_9cd9b2c0",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-05-06T14:09:19Z",
      "side": 1,
      "message": "May be doable, except that ssh-keyscan still needs to be used to get keys and save them into facts, so command module is unavoidable. Anyway, point taken, will investigate.",
      "parentUuid": "0cd8f00e_3d100427",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3b5d986_9d6b356c",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-06T14:12:17Z",
      "side": 1,
      "message": "No need to use keyscan via shell module IMO, \u0027slurp\u0027 or something similar for getting remote file could suffice.",
      "parentUuid": "902fcf41_9cd9b2c0",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c11dc300_c90de408",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-05-06T14:15:44Z",
      "side": 1,
      "message": "Well, may be done. keyscan seems easier, but... will see",
      "parentUuid": "e3b5d986_9d6b356c",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 77
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a2f402a_ff1f92e4",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 5097
      },
      "writtenOn": "2019-05-06T14:06:06Z",
      "side": 1,
      "message": "\u0027with_items\u0027 is deprecated, \u0027loop\u0027 is the future-proof.",
      "range": {
        "startLine": 27,
        "startChar": 2,
        "endLine": 27,
        "endChar": 12
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15eefa64_1e2c8381",
        "filename": "ansible/roles/rke/tasks/rke_config.yml",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-05-06T14:09:19Z",
      "side": 1,
      "message": "oh didn\u0027t notice, you\u0027re right.",
      "parentUuid": "4a2f402a_ff1f92e4",
      "range": {
        "startLine": 27,
        "startChar": 2,
        "endLine": 27,
        "endChar": 12
      },
      "revId": "67d84b29018911ebadb5b545a9822f0539dbca41",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}
{
  "comments": [
    {
      "key": {
        "uuid": "8e5ccfd6_76dd97b9",
        "filename": "ansible/roles/nexus/tasks/install.yml",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 5052
      },
      "writtenOn": "2019-02-13T14:03:14Z",
      "side": 1,
      "message": "I don\u0027t like nginx role here. I would rather publish nexus port and check readiness on that instead.",
      "revId": "5cc579dcae41b9f9ee1ef0c568b87ba086e103e6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c516622_9363dc1b",
        "filename": "ansible/roles/nexus/tasks/install.yml",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-02-13T15:07:14Z",
      "side": 1,
      "message": "Ok. I did not changed the functionality from old. At least this should work same way.\n\nAnd I don\u0027t know why it was done like this, i.e. nginx needs to be started in the middle. Is it because below waiting loop needs nginx to be up to query nexus healthcheck? Is that what you mean with \"publish nexus port\" that we could run healtcheck loop without starting nginx?\nThat would be great change and we could move nginx role to playbook after nexus.\n\nIf that\u0027s possible I want to do that change also as part of this commit. Or separate commit?",
      "parentUuid": "8e5ccfd6_76dd97b9",
      "revId": "5cc579dcae41b9f9ee1ef0c568b87ba086e103e6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88e872bd_131f1e73",
        "filename": "ansible/roles/nexus/tasks/install.yml",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 5052
      },
      "writtenOn": "2019-02-13T15:33:14Z",
      "side": 1,
      "message": "nginx.conf has nexus specified as upstream so nginx won\u0027t start without nexus already listening on the ports specified in that config and container will crash.\nSince port is not published (bound to port on host) you can communicate with nexus only through nginx. I would say that\u0027s why this loop is after nginx. So yeah if you bind port 8081 you can query nexus health there.\nI am ok with that change to be in this commit.",
      "parentUuid": "0c516622_9363dc1b",
      "revId": "5cc579dcae41b9f9ee1ef0c568b87ba086e103e6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0bc1223f_c3121a9b",
        "filename": "ansible/roles/nexus/tasks/install.yml",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 3957
      },
      "writtenOn": "2019-02-14T06:06:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "88e872bd_131f1e73",
      "revId": "5cc579dcae41b9f9ee1ef0c568b87ba086e103e6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8833e533_ede431a3",
        "filename": "ansible/roles/nexus/tasks/install.yml",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-02-15T10:10:35Z",
      "side": 1,
      "message": "Hmmm... actually why does nginx specify it as upstream server instead of proxying directly there? using proxy_pass to http:// address will not crash nginx.",
      "parentUuid": "0bc1223f_c3121a9b",
      "revId": "5cc579dcae41b9f9ee1ef0c568b87ba086e103e6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}